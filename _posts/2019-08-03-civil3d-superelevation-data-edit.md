---
layout: post
title:  "AutoCAD Civil 3D-超高及数据编辑输入"
date: 2019-08-03
categories: Civil3D 超高
tags: Civil3D 超高 公路 工程测量
author: QinDong
---
* content
{:toc}

由于无法找到对应的设计规范，就不能通过设定相应规范自动进行超高计算。而且即使能找到合适的本地规范，由于不同的设计院采用的参数不同，通过选定设计规范进行自动超高计算目前在国内无法实现。

要想设定路线的超高，只有通过手动编辑输入相关数据。我们的基本思路是先通过任意选定一个设计规范进行自动计算得到超高数据表格及其数据格式，将数据导出按格式手工输入相关点的超高坡率，将由设计规范计算的数据清空，再导入我们编辑的数据完成超高数据的设定。主要步骤如下：




### 选择路线

在右键菜单里选“编辑超高”,会提示路线无超高数据，是否需要进行超高计算：

![](/img/2019/20190803-civil3d-superelevation-data-edit-01.png)

![](/img/2019/20190803-civil3d-superelevation-data-edit-02.png)

### 计算超高

选择“立即计算超高”，弹出超高计算向导：

![](/img/2019/20190803-civil3d-superelevation-data-edit-03.png)

按路线情况选择道路类型。密瓦IX标为县道，无中间带双向横坡（-2%），故选第一项：

![](/img/2019/20190803-civil3d-superelevation-data-edit-04.png)

在以上对话框中设置道路宽度及横坡，点“下一步”：

![](/img/2019/20190803-civil3d-superelevation-data-edit-05.png)

设置路肩参数，继续下一步：

![](/img/2019/20190803-civil3d-superelevation-data-edit-06.png)

在出现上图对话框要求指定一个规范文件，因我们会在后续手动编辑超高数据，不采用以上使用规范生成的数据，故规范文件随意，保持默认直接点击“完成”，会出现根据规范文件生成的曲线超高数据表：

![](/img/2019/20190803-civil3d-superelevation-data-edit-07.png)

### 导出并编辑超高数据

在以上“超高数据表”中点击上部倒数第四个按钮“导出”功能，将此表中的数据导出到一个CSV文件里，主要是查看其数据组织格式。然后点击最后一个“清空”按钮将此表中数据清空。按数据格式在EXCEL或WPS里将数据编辑好后保存为CSV格式，再在以上超高数据表中使用导入功能将超高数据导入即可。

特别注意：在编辑超高数据表时，变化点桩号必须以实际线路长输入，在导入时C3D会根据断链情况进行加减处理，如在输入时考虑了断链，则导入后会错位（即进行了两次断链考虑，第一次人工按原设计桩号输入时考虑了断链，导入时C3D再次进行了断链纠正），而且在超高数据表中无法手动更改。

例：

在密瓦IX标第一段起点至约学隧洞口约3.5公里，其中有两段改线发生桩号变化，第二段因在约学隧洞段，洞口位发生变化，洞口明线段长度不大，且在第一分段尾部，对本段无影响。其中K104+011.74~K104+353.31为变更改线。改线后断链点为：K104+353.31=K104+350.00，断链点后从原设计K104+350.00桩号开始，差值为3.53米。在编辑超高数据表时，此段以后的曲线变化点桩号均为按原设计桩号（即断链后桩号），导入后C3D自动进行断链处理，将桩号减去3.53米，导致在超高视图中查看时断链点后的曲线超高变化点位置与正确位置总是相差几米，经过仔细检查计算，发现导入时进行了断链处理，将桩号减去了3.53米。在将断链后的所有桩号加上3.53米即以线路实际桩号输入，再次导入，由C3D进行断链处理，数据正确。

### 例：密瓦IX标A段超高数据

附：（保存为CSV文件后可直接导入）

```
Superelevation Region,Station,Description,Smoothing Curve Length,Left Outside Shoulder,Left Outside Lane,Left Inside Lane,Left Inside Shoulder,Right Outside Shoulder,Right Outside Lane,Right Inside Lane,Right Inside Shoulder
,103160,Begin Alignment,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
1,103259.79,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
1,103273.1233,QBD,0,-2.00%,-2.00%,0.00%,0.00%,2.00%,2.00%,0.00%,0.00%
1,103279.79,HY,0,-4.00%,-4.00%,0.00%,0.00%,4.00%,4.00%,0.00%,0.00%
1,103299.2,YH,0,-4.00%,-4.00%,0.00%,0.00%,4.00%,4.00%,0.00%,0.00%
1,103305.8667,QBD,0,-2.00%,-2.00%,0.00%,0.00%,2.00%,2.00%,0.00%,0.00%
1,103319.2,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
2,103357.82,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
2,103367.82,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
2,103377.82,HY,0,6.00%,6.00%,0.00%,0.00%,-6.00%,-6.00%,0.00%,0.00%
2,103402.96,YH,0,6.00%,6.00%,0.00%,0.00%,-6.00%,-6.00%,0.00%,0.00%
2,103412.96,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
2,103422.96,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
3,103443.96,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
3,103453.96,QBD,0,-2.00%,-2.00%,0.00%,0.00%,2.00%,2.00%,0.00%,0.00%
3,103463.96,HY,0,-6.00%,-6.00%,0.00%,0.00%,6.00%,6.00%,0.00%,0.00%
3,103477.16,YH,0,-6.00%,-6.00%,0.00%,0.00%,6.00%,6.00%,0.00%,0.00%
3,103487.16,QBD,0,-2.00%,-2.00%,0.00%,0.00%,2.00%,2.00%,0.00%,0.00%
3,103497.16,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
4,103523.13,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
4,103534.5586,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
4,103543.13,HY,0,5.00%,5.00%,0.00%,0.00%,-5.00%,-5.00%,0.00%,0.00%
4,103552.13,YH,0,5.00%,5.00%,0.00%,0.00%,-5.00%,-5.00%,0.00%,0.00%
4,103560.7014,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
4,103572.13,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
5,103572.13,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
5,103582.13,QBD,0,-2.00%,-2.00%,0.00%,0.00%,2.00%,2.00%,0.00%,0.00%
5,103592.13,HY,0,-6.00%,-6.00%,0.00%,0.00%,6.00%,6.00%,0.00%,0.00%
5,103601.65,YH,0,-6.00%,-6.00%,0.00%,0.00%,6.00%,6.00%,0.00%,0.00%
5,103611.65,QBD,0,-2.00%,-2.00%,0.00%,0.00%,2.00%,2.00%,0.00%,0.00%
5,103621.65,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
6,103621.65,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
6,103631.65,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
6,103641.65,HY,0,6.00%,6.00%,0.00%,0.00%,-6.00%,-6.00%,0.00%,0.00%
6,103671.79,YH,0,6.00%,6.00%,0.00%,0.00%,-6.00%,-6.00%,0.00%,0.00%
6,103681.79,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
6,103691.79,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
7,103691.79,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
7,103705.1233,QBD,0,-2.00%,-2.00%,0.00%,0.00%,2.00%,2.00%,0.00%,0.00%
7,103711.79,HY,0,-4.00%,-4.00%,0.00%,0.00%,4.00%,4.00%,0.00%,0.00%
7,103754.79,YH,0,-4.00%,-4.00%,0.00%,0.00%,4.00%,4.00%,0.00%,0.00%
7,103761.4567,QBD,0,-2.00%,-2.00%,0.00%,0.00%,2.00%,2.00%,0.00%,0.00%
7,103774.79,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
8,103802.8,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
8,103814.2286,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
8,103822.8,HY,0,5.00%,5.00%,0.00%,0.00%,-5.00%,-5.00%,0.00%,0.00%
8,103838.32,YH,0,5.00%,5.00%,0.00%,0.00%,-5.00%,-5.00%,0.00%,0.00%
8,103846.8914,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
8,103858.32,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
9,103858.32,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
9,103868.32,QBD,0,-2.00%,-2.00%,0.00%,0.00%,2.00%,2.00%,0.00%,0.00%
9,103878.32,HY,0,-6.00%,-6.00%,0.00%,0.00%,6.00%,6.00%,0.00%,0.00%
9,103891.16,YH,0,-6.00%,-6.00%,0.00%,0.00%,6.00%,6.00%,0.00%,0.00%
9,103901.16,QBD,0,-2.00%,-2.00%,0.00%,0.00%,2.00%,2.00%,0.00%,0.00%
9,103911.16,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
......
30,105601.51,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
30,105614.8433,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
30,105621.51,HY,0,4.00%,4.00%,0.00%,0.00%,-4.00%,-4.00%,0.00%,0.00%
30,105647.96,YH,0,4.00%,4.00%,0.00%,0.00%,-4.00%,-4.00%,0.00%,0.00%
30,105654.6267,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
30,105667.96,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
32,105800.82,ZH,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
32,105816.82,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
32,105820.82,HY,0,3.00%,3.00%,0.00%,0.00%,-3.00%,-3.00%,0.00%,0.00%
32,105854.05,YH,0,3.00%,3.00%,0.00%,0.00%,-3.00%,-3.00%,0.00%,0.00%
32,105858.05,QBD,0,2.00%,2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
32,105874.05,HY,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
,106720.33,End Alignment,0,-2.00%,-2.00%,0.00%,0.00%,-2.00%,-2.00%,0.00%,0.00%
```

以上数据每一个曲线的数据必须使用一个序号，序号本身并不影响超高计算，C3D将会按桩号自行排列。

上面编辑生成的超高数据与规范产生的数据并不完全相同。以上数据主要根据设计图中的超高视图上曲线的主要起变点进行创建。主要有六点：分别直缓点、缓圆点、圆缓点、缓直点以及低侧两个起变点。

超高方式：高侧从直缓点由正常横坡至缓圆点完成渐变到超高坡率，圆弧段全为超高坡率，再从圆缓点至缓直点变回正常横坡。低侧在高侧起变时保持不变，直至高侧坡率变为与低侧正常横坡一致（符号相反）时同时向超高坡率变化，直至缓圆点完成。后段同理。

如：普通横坡为-2%，超高坡率为4%。变化方式为：高侧从直缓至缓圆点由-2%变为4%、圆弧段坡率为4%，圆缓至缓直由4%变为-2%。低侧在高侧变化到2%时起变，直至缓圆坡率达到超高-4%，圆弧段高侧4%，低侧-4%（横坡方向为中心线往两侧方向）。低侧从圆缓起变，至高侧变回-2%时结束。

### 超高视图

每一个曲线超高数据按以上六点桩号及对应的左、右侧路肩、车道坡率组织，以正常横坡-2%、超高6%为例，六点对应超高视图上的点位如下图：

![](/img/2019/20190803-civil3d-superelevation-data-edit-08.png)
