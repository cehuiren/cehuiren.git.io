<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="AutoLISP自定义通用过程函数" /><meta name="author" content="QinDong" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="A minimal, responsive, and powerful Jekyll theme for presenting professional writing." /><meta property="og:description" content="A minimal, responsive, and powerful Jekyll theme for presenting professional writing." /><link rel="canonical" href="https://www.cehui.ren/posts/lisp-common-subs-functions/" /><meta property="og:url" content="https://www.cehui.ren/posts/lisp-common-subs-functions/" /><meta property="og:site_name" content="测量老覃’s blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2010-05-11T09:06:16+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AutoLISP自定义通用过程函数" /><meta name="twitter:site" content="@qd_xyz" /><meta name="twitter:creator" content="@qd_xyz" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"QinDong","url":"https://www.cehui.ren/about/"},"dateModified":"2010-05-11T09:06:16+08:00","datePublished":"2010-05-11T09:06:16+08:00","description":"A minimal, responsive, and powerful Jekyll theme for presenting professional writing.","headline":"AutoLISP自定义通用过程函数","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.cehui.ren/posts/lisp-common-subs-functions/"},"url":"https://www.cehui.ren/posts/lisp-common-subs-functions/"}</script><title>AutoLISP自定义通用过程函数 | 测量老覃's blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="测量老覃's blog"><meta name="application-name" content="测量老覃's blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">测量老覃's blog</a></div><div class="site-subtitle font-italic">www.cehui.ren</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/qin-dong" aria-label="stack-overflow" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/qd_xyz" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['qd.xyz','139.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" target="_blank" rel="noopener"> <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>AutoLISP自定义通用过程函数</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>AutoLISP自定义通用过程函数</h1><div class="post-meta text-muted"> <span> 发表于 <em class="" data-ts="1273539976" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2010-05-11 </em> </span><div class="d-flex justify-content-between"> <span> 作者 <em> <a href="https://www.cehui.ren/about/">QinDong</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1236 字"> <em>6 分钟</em>阅读</span></div></div></div><div class="post-content"><p>本段代码是 <a href="https://www.cehui.ren/posts/acad-toolkit/">AutoCAD工程测量工具集</a> 中可能调用的自定义通用函数。</p><div file="自定义通用函数.lsp" class="language-lisp highlighter-rouge"><div class="code-header"> <span data-label-text="自定义通用函数.lsp"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
</pre><td class="rouge-code"><pre><span class="c1">;;自定义通用函数----------------------------------------------------------------------------------;;</span>

<span class="c1">;;用法：(EntMakeText 点X 点Y 文本内容 文本高度)</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">EntMakeText</span>  <span class="p">(</span><span class="nv">px</span> <span class="nv">py</span> <span class="nv">str</span> <span class="nv">tHeight</span> <span class="nv">styleName</span> <span class="nv">layerName</span> <span class="nb">/</span> <span class="nv">pt</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">pt</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">px</span> <span class="nv">py</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">entmakeX</span>
    <span class="p">(</span><span class="nb">list</span> <span class="o">'</span><span class="p">(</span><span class="mi">0</span> <span class="o">.</span> <span class="s">"TEXT"</span><span class="p">)</span>
	  <span class="p">(</span><span class="nb">cons</span> <span class="mi">1</span> <span class="nv">str</span><span class="p">)</span>
	  <span class="p">(</span><span class="nb">cons</span> <span class="mi">10</span> <span class="nv">pt</span><span class="p">)</span>
	  <span class="p">(</span><span class="nb">cons</span> <span class="mi">7</span> <span class="nv">styleName</span><span class="p">)</span>
	  <span class="p">(</span><span class="nb">cons</span> <span class="mi">8</span> <span class="nv">layerName</span><span class="p">)</span>
	  <span class="p">(</span><span class="nb">cons</span> <span class="mi">40</span> <span class="nv">tHeight</span><span class="p">)</span>
	  <span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>

<span class="c1">;;用法：(EntMakeLine 起点X 起点Y 终点X 终点Y)</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">EntMakeLine</span>  <span class="p">(</span><span class="nv">xa</span> <span class="nv">ya</span> <span class="nv">xb</span> <span class="nv">yb</span> <span class="nv">layerName</span> <span class="nb">/</span> <span class="nv">p1</span> <span class="nv">p2</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span>	<span class="nv">p1</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">xa</span> <span class="nv">ya</span><span class="p">)</span>
	<span class="nv">p2</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">xb</span> <span class="nv">yb</span><span class="p">)</span>
	<span class="p">)</span>
  <span class="p">(</span><span class="nv">entmakeX</span> <span class="p">(</span><span class="nb">list</span> <span class="o">'</span><span class="p">(</span><span class="mi">0</span> <span class="o">.</span> <span class="s">"LINE"</span><span class="p">)</span>
		  <span class="o">'</span><span class="p">(</span><span class="mi">370</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span>
		  <span class="p">(</span><span class="nb">cons</span> <span class="mi">10</span> <span class="nv">p1</span><span class="p">)</span>
		  <span class="p">(</span><span class="nb">cons</span> <span class="mi">11</span> <span class="nv">p2</span><span class="p">)</span>
		  <span class="p">(</span><span class="nb">cons</span> <span class="mi">8</span> <span class="nv">layerName</span><span class="p">)</span>
		  <span class="p">)</span>
	    <span class="p">)</span>
  <span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">entMakePLineThick</span>  <span class="p">(</span><span class="nv">pts</span> <span class="nv">weight</span> <span class="nv">layerName</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">entmake</span> <span class="p">(</span><span class="nb">append</span>
	     <span class="p">(</span><span class="nb">list</span> <span class="o">'</span><span class="p">(</span><span class="mi">0</span> <span class="o">.</span> <span class="s">"LWPOLYLINE"</span><span class="p">)</span>
		   <span class="o">'</span><span class="p">(</span><span class="mi">100</span> <span class="o">.</span> <span class="s">"AcDbEntity"</span><span class="p">)</span>
		   <span class="o">'</span><span class="p">(</span><span class="mi">100</span> <span class="o">.</span> <span class="s">"AcDbPolyline"</span><span class="p">)</span>
		   <span class="p">(</span><span class="nb">cons</span> <span class="mi">8</span> <span class="nv">layerName</span><span class="p">)</span>
		   <span class="c1">;;层</span>
		   <span class="c1">;;'(62 . 7)</span>
		   <span class="c1">;;颜色：7-白色</span>
		   <span class="o">'</span>
		    <span class="p">(</span><span class="mi">370</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span>
		   <span class="c1">;;线宽0，0.20值为(370 . 20)</span>
		   <span class="p">(</span><span class="nb">cons</span> <span class="mi">90</span> <span class="p">(</span><span class="nb">length</span> <span class="nv">pts</span><span class="p">))</span>
		   <span class="p">(</span><span class="nb">cons</span> <span class="mi">43</span> <span class="nv">weight</span><span class="p">)</span>
		   <span class="c1">;;全局宽</span>
		   <span class="o">'</span>
		    <span class="p">(</span><span class="mi">70</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span>
		   <span class="p">)</span> <span class="c1">;list</span>
	     <span class="p">(</span><span class="nb">mapcar</span> <span class="o">'</span><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span>
			<span class="p">(</span><span class="nb">cons</span> <span class="mi">40</span> <span class="nv">weight</span><span class="p">)</span>
			<span class="c1">;;起点宽</span>
			<span class="p">(</span><span class="nb">cons</span> <span class="mi">41</span> <span class="nv">weight</span><span class="p">)</span>
			<span class="c1">;;终点宽</span>
			<span class="p">(</span><span class="nb">cons</span> <span class="mi">42</span> <span class="mf">0.0</span><span class="p">)</span>
			<span class="p">(</span><span class="nb">cons</span> <span class="mi">10</span> <span class="nv">x</span><span class="p">)</span>
			<span class="p">)</span>
		     <span class="nv">pts</span>
		     <span class="p">)</span>
	     <span class="p">)</span> <span class="c1">;append</span>
	   <span class="p">)</span>
  <span class="p">)</span>


<span class="p">(</span><span class="nb">defun</span> <span class="nv">entMakePLine</span>  <span class="p">(</span><span class="nv">pts</span> <span class="nv">layerName</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">entmake</span> <span class="p">(</span><span class="nb">append</span>
	     <span class="p">(</span><span class="nb">list</span> <span class="o">'</span><span class="p">(</span><span class="mi">0</span> <span class="o">.</span> <span class="s">"LWPOLYLINE"</span><span class="p">)</span>
		   <span class="o">'</span><span class="p">(</span><span class="mi">100</span> <span class="o">.</span> <span class="s">"AcDbEntity"</span><span class="p">)</span>
		   <span class="o">'</span><span class="p">(</span><span class="mi">100</span> <span class="o">.</span> <span class="s">"AcDbPolyline"</span><span class="p">)</span>
		   <span class="o">'</span><span class="p">(</span><span class="mi">370</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span>
		   <span class="p">(</span><span class="nb">cons</span> <span class="mi">8</span> <span class="nv">layerName</span><span class="p">)</span>
		   <span class="p">(</span><span class="nb">cons</span> <span class="mi">90</span> <span class="p">(</span><span class="nb">length</span> <span class="nv">pts</span><span class="p">))</span>
		   <span class="o">'</span><span class="p">(</span><span class="mi">70</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span>
		   <span class="p">)</span> <span class="c1">;list</span>
	     <span class="p">(</span><span class="nb">mapcar</span> <span class="o">'</span><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">cons</span> <span class="mi">10</span> <span class="nv">x</span><span class="p">))</span> <span class="nv">pts</span><span class="p">)</span>
	     <span class="p">)</span> <span class="c1">;append</span>
	   <span class="p">)</span>
  <span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">EntMakeTextStyle</span>	 <span class="p">(</span><span class="nv">tStyleName</span> <span class="nv">tStyleHeight</span> <span class="nv">tStyleWeight</span> <span class="nv">tFontName</span> <span class="nv">tBigFontName</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">not</span> <span class="p">(</span><span class="nv">tblsearch</span> <span class="s">"style"</span> <span class="nv">tStyleName</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">entmakeX</span>
      <span class="p">(</span><span class="nb">list</span>
	<span class="o">'</span><span class="p">(</span><span class="mi">0</span> <span class="o">.</span> <span class="s">"STYLE"</span><span class="p">)</span>
	<span class="o">'</span><span class="p">(</span><span class="mi">100</span> <span class="o">.</span> <span class="s">"AcDbSymbolTableRecord"</span><span class="p">)</span>
	<span class="o">'</span><span class="p">(</span><span class="mi">100</span> <span class="o">.</span> <span class="s">"AcDbTextStyleTableRecord"</span><span class="p">)</span>
	<span class="p">(</span><span class="nb">cons</span> <span class="mi">2</span> <span class="nv">tStyleName</span><span class="p">)</span>
	<span class="o">'</span><span class="p">(</span><span class="mi">70</span> <span class="o">.</span> <span class="mi">0</span><span class="p">)</span>
	<span class="p">(</span><span class="nb">cons</span> <span class="mi">40</span> <span class="nv">tStyleHeight</span><span class="p">)</span>
	<span class="p">(</span><span class="nb">cons</span> <span class="mi">41</span> <span class="nv">tStyleWeight</span><span class="p">)</span>
	<span class="p">(</span><span class="nb">cons</span> <span class="mi">3</span> <span class="nv">tFontName</span><span class="p">)</span>
	<span class="p">(</span><span class="nb">cons</span> <span class="mi">4</span> <span class="nv">tBigFontName</span><span class="p">)</span>
	<span class="p">)</span>
      <span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nv">EntMakeLayer</span>  <span class="p">(</span><span class="nv">layname</span> <span class="nv">color</span> <span class="nb">/</span> <span class="nv">nlay</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">vl-load-com</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">or</span> <span class="p">(</span><span class="nv">tblsearch</span> <span class="s">"layer"</span> <span class="nv">layname</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">or</span> <span class="p">(</span><span class="nb">not</span> <span class="p">(</span><span class="k">setq</span> <span class="nv">nlay</span>
		      <span class="p">(</span><span class="nv">vla-add</span> <span class="p">(</span><span class="nv">vla-get-layers</span>
				 <span class="p">(</span><span class="nv">vla-get-activedocument</span> <span class="p">(</span><span class="nv">vlax-get-acad-object</span><span class="p">))</span>
				 <span class="p">)</span>
			       <span class="nv">layname</span>
			       <span class="p">)</span>
		     <span class="p">)</span>
	       <span class="p">)</span>
	  <span class="p">(</span><span class="nv">vla-put-color</span> <span class="nv">nlay</span> <span class="nv">color</span><span class="p">)</span> <span class="c1">;vla-put-返回值为nil</span>
	  <span class="c1">;(vla-put-plottable nlay :vlax-false) ;设为不打印层</span>
	  <span class="c1">;(vla-put-activelayer</span>
	  <span class="c1">;  (vla-get-activedocument (vlax-get-acad-object))</span>
	  <span class="c1">;  nlay</span>
	  <span class="c1">;)</span>
	  <span class="c1">;;设为当前层</span>
	  <span class="p">)</span>
      <span class="p">)</span>
  <span class="p">)</span>


<span class="c1">;;;功能：字符串按指定分隔符分隔,分隔符可以是字串，用于取文件名，用扩展名作为分隔符</span>
<span class="c1">;;;(splitX "C:\\Users\\....25～K1+013.52；EL.2776.73～EL.2804.74）.dat" ".dat")</span>
<span class="c1">;;;返回：(C:\\Users\\....25～K1+013.52；EL.2776.73～EL.2804.74）)</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">splitX</span>  <span class="p">(</span><span class="nv">str</span> <span class="nv">delim</span> <span class="nb">/</span> <span class="nv">LST</span> <span class="nv">POS</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">while</span> <span class="p">(</span><span class="k">setq</span> <span class="nv">pos</span> <span class="p">(</span><span class="nv">vl-string-search</span> <span class="nv">delim</span> <span class="nv">str</span><span class="p">))</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">lst</span> <span class="p">(</span><span class="nb">append</span> <span class="nv">lst</span> <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nv">substr</span> <span class="nv">str</span> <span class="mi">1</span> <span class="nv">pos</span><span class="p">))))</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">str</span> <span class="p">(</span><span class="nv">substr</span> <span class="nv">str</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">pos</span> <span class="p">(</span><span class="nv">strlen</span> <span class="nv">delim</span><span class="p">))</span> <span class="mi">1</span><span class="p">)))</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&gt;</span> <span class="p">(</span><span class="nv">strlen</span> <span class="nv">str</span><span class="p">)</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">append</span> <span class="nv">lst</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">str</span><span class="p">))</span>
    <span class="nv">lst</span>
    <span class="p">)</span>
  <span class="p">)</span>


<span class="p">(</span><span class="nb">defun</span> <span class="nv">pt_inorout</span>  <span class="p">(</span><span class="nv">regionObj</span> <span class="nv">pt</span> <span class="nb">/</span> <span class="nv">pt_list</span> <span class="nv">e1</span> <span class="nv">pt</span> <span class="nv">n</span> <span class="nv">i</span> <span class="nv">j</span> <span class="nv">va</span> <span class="nv">va_count</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span>	<span class="nv">pt_list</span>	<span class="p">(</span><span class="nb">mapcar</span>	<span class="ss">'cdr</span>
			<span class="p">(</span><span class="nv">vl-remove-if</span>
			  <span class="o">'</span><span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">/=</span> <span class="mi">10</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">x</span><span class="p">)))</span>
			  <span class="p">(</span><span class="nv">entget</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">regionObj</span><span class="p">))</span>
			  <span class="p">)</span>
			<span class="p">)</span>
	<span class="p">)</span>

  <span class="p">(</span><span class="k">setq</span>	<span class="nv">i</span>	 <span class="mi">0</span>
	<span class="nv">va_count</span> <span class="mi">0</span>
	<span class="nv">n</span>	 <span class="p">(</span><span class="nb">length</span> <span class="nv">pt_list</span><span class="p">)</span>
	<span class="nv">pt_list</span>	 <span class="p">(</span><span class="nb">append</span> <span class="nv">pt_list</span> <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">pt_list</span><span class="p">)))</span>
	<span class="p">)</span>
  <span class="p">(</span><span class="nv">repeat</span> <span class="nv">n</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">va</span> <span class="p">(</span><span class="nb">-</span>	<span class="p">(</span><span class="nv">angle</span> <span class="nv">pt</span> <span class="p">(</span><span class="nb">nth</span> <span class="nv">i</span> <span class="nv">pt_list</span><span class="p">))</span>
		<span class="p">(</span><span class="nv">angle</span> <span class="nv">pt</span> <span class="p">(</span><span class="nb">nth</span> <span class="p">(</span><span class="nb">1+</span> <span class="nv">i</span><span class="p">)</span> <span class="nv">pt_list</span><span class="p">))</span>
		<span class="p">)</span>
	  <span class="p">)</span>
    <span class="p">(</span><span class="nb">cond</span> <span class="p">((</span><span class="nb">&gt;</span> <span class="nv">va</span> <span class="nv">pi</span><span class="p">)</span> <span class="p">(</span><span class="k">setq</span> <span class="nv">va</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">va</span> <span class="nv">pi</span><span class="p">)))</span>
	  <span class="p">((</span><span class="nb">&lt;</span> <span class="nv">va</span> <span class="p">(</span><span class="nb">*</span> <span class="mi">-1</span> <span class="nv">pi</span><span class="p">))</span> <span class="p">(</span><span class="k">setq</span> <span class="nv">va</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">va</span> <span class="nv">pi</span><span class="p">)))</span>
	  <span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">va_count</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">va_count</span> <span class="nv">va</span><span class="p">)</span>
	  <span class="nv">i</span>	   <span class="p">(</span><span class="nb">1+</span> <span class="nv">i</span><span class="p">)</span>
	  <span class="p">)</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&lt;</span> <span class="p">(</span><span class="nb">abs</span> <span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nb">abs</span> <span class="nv">va_count</span><span class="p">)</span> <span class="nv">pi</span><span class="p">))</span> <span class="mf">0.000001</span><span class="p">)</span>
    <span class="ss">'t</span>
    <span class="ss">'nil</span>
    <span class="p">)</span>
  <span class="p">)</span>


<span class="p">(</span><span class="nb">defun</span> <span class="nv">date</span>  <span class="p">()</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">datetime</span> <span class="p">(</span><span class="nv">rtos</span> <span class="p">(</span><span class="nv">getvar</span> <span class="s">"cdate"</span><span class="p">)</span> <span class="mi">2</span> <span class="mi">6</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">car</span> <span class="p">(</span><span class="nv">splitx</span> <span class="nv">datetime</span> <span class="s">"."</span><span class="p">))</span>
  <span class="p">)</span>

<span class="p">(</span><span class="nb">defun</span> <span class="nb">time</span>  <span class="p">()</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">datetime</span> <span class="p">(</span><span class="nv">rtos</span> <span class="p">(</span><span class="nv">getvar</span> <span class="s">"cdate"</span><span class="p">)</span> <span class="mi">2</span> <span class="mi">6</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">cadr</span> <span class="p">(</span><span class="nv">splitx</span> <span class="nv">datetime</span> <span class="s">"."</span><span class="p">))</span>
  <span class="p">)</span>
</pre></table></code></div></div><div file="简短帮助.lsp" class="language-lisp highlighter-rouge"><div class="code-header"> <span data-label-text="简短帮助.lsp"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre><td class="rouge-code"><pre><span class="p">(</span><span class="nb">defun</span> <span class="nv">C:zzHelp</span>	 <span class="p">()</span>
  <span class="p">(</span><span class="nb">princ</span>
    <span class="s">"\n-测量工具箱 | Ver:20200817 | 覃东 水电十二局宁海施工局测量队-"</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n01 zzFGW：生成方格网坐标数据文件(D:盘)"</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n02 zzArea2Table：输出面积到AutoCAD表格"</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n03 zzArea2File：输出面积到文件"</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n04 zzA：标注面积到区域中心"</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n05 zzQydx：区域地形：删除指定封闭区域外的地形点"</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span>
    <span class="s">"\n06 zzQywdx：区域外地形：删除指定封闭区域内的地形点"</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n07 zzBC：横断面高程标尺：绘制横断面图的高程标尺"</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span>
    <span class="s">"\n08 zzExport2Dat：CASS地形图导出无编码数据文件(.dat)"</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span>
    <span class="s">"\n09 zzCass2CadPoint：CASS地形图生成CAD点对象用于生成C3D曲面"</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n10 zzHelp：查看命令帮助提示信息"</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n(c)QinDong qd.xyz@139.com 2020-08-17 覃东 宁海"</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span><span class="p">)</span>
  <span class="p">)</span>

<span class="p">(</span><span class="nv">vl-load-com</span><span class="p">)</span>
<span class="p">(</span><span class="nb">princ</span><span class="p">)</span>
<span class="p">(</span><span class="nb">princ</span>
  <span class="s">"\n-测量工具箱 | Ver:20200817 | 覃东 水电十二局宁海施工局测量队-"</span>
  <span class="p">)</span>
<span class="p">(</span><span class="nb">princ</span> <span class="s">"\n01 zzFGW：生成方格网坐标数据文件(D:盘)"</span><span class="p">)</span>

<span class="p">(</span><span class="nb">princ</span> <span class="s">"\n05 zzQydx：区域地形：删除指定封闭区域外的地形点"</span><span class="p">)</span>
<span class="p">(</span><span class="nb">princ</span>
  <span class="s">"\n06 zzQywdx：区域外地形：删除指定封闭区域内的地形点"</span>
  <span class="p">)</span>
<span class="p">(</span><span class="nb">princ</span> <span class="s">"\n07 zzBC：横断面高程标尺：绘制横断面图的高程标尺"</span><span class="p">)</span>
<span class="p">(</span><span class="nb">princ</span>
  <span class="s">"\n08 zzExport2Dat：CASS地形图导出无编码数据文件(.dat)"</span>
  <span class="p">)</span>
<span class="p">(</span><span class="nb">princ</span>
  <span class="s">"\n09 zzCass2CadPoint：CASS地形图生成CAD点对象用于生成C3D曲面"</span>
  <span class="p">)</span>
<span class="p">(</span><span class="nb">princ</span> <span class="s">"\n10 zzHelp：查看命令帮助提示信息"</span><span class="p">)</span>
<span class="p">(</span><span class="nb">princ</span> <span class="s">"\n(c)QinDong qd.xyz@139.com 2020-08-17 覃东 宁海"</span><span class="p">)</span>
<span class="p">(</span><span class="nb">princ</span><span class="p">)</span>

<span class="c1">;;------------------------------------------------------------;;</span>
<span class="c1">;;                         End of File                        ;;</span>
<span class="c1">;;------------------------------------------------------------;;</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%E7%BC%96%E7%A8%8B%E5%BC%80%E5%8F%91/'>编程开发</a>, <a href='/categories/autolisp/'>AutoLISP</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%E5%87%BD%E6%95%B0/" class="post-tag no-text-decoration" >函数</a> <a href="/tags/%E9%80%9A%E7%94%A8%E4%BB%A3%E7%A0%81/" class="post-tag no-text-decoration" >通用代码</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=AutoLISP%E8%87%AA%E5%AE%9A%E4%B9%89%E9%80%9A%E7%94%A8%E8%BF%87%E7%A8%8B%E5%87%BD%E6%95%B0+-+%E6%B5%8B%E9%87%8F%E8%80%81%E8%A6%83%27s+blog&url=https%3A%2F%2Fwww.cehui.ren%2Fposts%2Flisp-common-subs-functions%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=AutoLISP%E8%87%AA%E5%AE%9A%E4%B9%89%E9%80%9A%E7%94%A8%E8%BF%87%E7%A8%8B%E5%87%BD%E6%95%B0+-+%E6%B5%8B%E9%87%8F%E8%80%81%E8%A6%83%27s+blog&u=https%3A%2F%2Fwww.cehui.ren%2Fposts%2Flisp-common-subs-functions%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.cehui.ren%2Fposts%2Flisp-common-subs-functions%2F&text=AutoLISP%E8%87%AA%E5%AE%9A%E4%B9%89%E9%80%9A%E7%94%A8%E8%BF%87%E7%A8%8B%E5%87%BD%E6%95%B0+-+%E6%B5%8B%E9%87%8F%E8%80%81%E8%A6%83%27s+blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="http://service.weibo.com/share/share.php?title=AutoLISP%E8%87%AA%E5%AE%9A%E4%B9%89%E9%80%9A%E7%94%A8%E8%BF%87%E7%A8%8B%E5%87%BD%E6%95%B0+-+%E6%B5%8B%E9%87%8F%E8%80%81%E8%A6%83%27s+blog&url=https%3A%2F%2Fwww.cehui.ren%2Fposts%2Flisp-common-subs-functions%2F" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/autolisp-draw-3d-entity-code/">AutoLISP绘三维对象实体代码</a><li><a href="/posts/autolisp-layout-cass-points-draw-small-sphere/">AutoLISP源代码展CASS地形点生成三维小球体检查超欠挖</a><li><a href="/posts/mstn-accudraw-commands-hotkeys-list/">MicroStation精确绘图快捷键入命令的完整列表</a><li><a href="/posts/ord-plan-by-3D-element-smartline-create-alignment/">OpenRoads普通三维线段转化为Civil几何路线</a><li><a href="/posts/autocad-linework-commands/">AutoCAD编辑处理线构件LINEWORK相关命令</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/microstation/">MicroStation</a> <a class="post-tag" href="/tags/vba/">VBA</a> <a class="post-tag" href="/tags/%E4%BB%A3%E7%A0%81/">代码</a> <a class="post-tag" href="/tags/xm/">XM</a> <a class="post-tag" href="/tags/openroads/">OpenRoads</a> <a class="post-tag" href="/tags/key-in/">key-in</a> <a class="post-tag" href="/tags/%E6%96%B9%E9%87%8F/">方量</a> <a class="post-tag" href="/tags/civil3d/">Civil3D</a> <a class="post-tag" href="/tags/%E6%95%99%E7%A8%8B/">教程</a> <a class="post-tag" href="/tags/%E6%96%AD%E9%9D%A2/">断面</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/mstn-vba-inner-common-dialog/"><div class="card-body"> <em class="small" data-ts="1236825420" data-df="YYYY-MM-DD" > 2009-03-12 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MicroStation VBA调用内置文件对话框</h3><div class="text-muted small"><p> 稍作修改： 1. Declare PtrSafe Function mdlDialog_fileOpen Lib &quot;stdmdlbltin.dll&quot; (ByVal fileName As String, _ 2. ByVal fFileH As Long, ByVal resourceId As Long, ByVal suggestedFileName _ 3. ...</p></div></div></a></div><div class="card"> <a href="/posts/vba-common-file-dialog-CommonDialogFile64-bas/"><div class="card-body"> <em class="small" data-ts="1266028560" data-df="YYYY-MM-DD" > 2010-02-13 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>VBA 64位通用文件对话框代码</h3><div class="text-muted small"><p> Attribute VB_Name = &quot;Dialog_64_File&quot; &#39; INSTRUCTIONS: &#39; &#39; ( For a working example, open the Debug window ) &#39; ( and enter tsGetFileFromUserTest. ) &#39; &#39;.All the arguments...</p></div></div></a></div><div class="card"> <a href="/posts/vba-common-folder-dialog-CommonDialogFolder64bas/"><div class="card-body"> <em class="small" data-ts="1266204780" data-df="YYYY-MM-DD" > 2010-02-15 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>VBA 64位通用文件夹对话框代码</h3><div class="text-muted small"><p> Attribute VB_Name = &quot;Dialog_64_Folder&quot; &#39;选择文件夹(http://blog.sina.com.cn/s/blog_55fc7c2f0101mb4t.html)： Option Explicit &#39;http://www.mvps.org/access/api/api0002.htm &#39;Code courtesy of Terry Kreft ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/lisp-program-code-cass-points-to-cad-entity/" class="btn btn-outline-primary" prompt="上一篇"><p>CASS地形图地形点单元转换为AutoCAD实体点对象</p></a> <a href="/posts/formula-excel/" class="btn btn-outline-primary" prompt="下一篇"><p>Excel表格实用公式</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/qd_xyz">QinDong</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/microstation/">MicroStation</a> <a class="post-tag" href="/tags/vba/">VBA</a> <a class="post-tag" href="/tags/%E4%BB%A3%E7%A0%81/">代码</a> <a class="post-tag" href="/tags/xm/">XM</a> <a class="post-tag" href="/tags/openroads/">OpenRoads</a> <a class="post-tag" href="/tags/key-in/">key-in</a> <a class="post-tag" href="/tags/%E6%96%B9%E9%87%8F/">方量</a> <a class="post-tag" href="/tags/civil3d/">Civil3D</a> <a class="post-tag" href="/tags/%E6%95%99%E7%A8%8B/">教程</a> <a class="post-tag" href="/tags/%E6%96%AD%E9%9D%A2/">断面</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">发现新版本的内容。</p><button type="button" class="btn btn-primary" aria-label="Update"> 更新 </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
