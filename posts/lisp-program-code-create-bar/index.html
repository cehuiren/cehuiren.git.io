<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="绘横断面图标尺AutoLISP程序源代码" /><meta name="author" content="QinDong" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="A minimal, responsive, and powerful Jekyll theme for presenting professional writing." /><meta property="og:description" content="A minimal, responsive, and powerful Jekyll theme for presenting professional writing." /><link rel="canonical" href="https://www.cehui.ren/posts/lisp-program-code-create-bar/" /><meta property="og:url" content="https://www.cehui.ren/posts/lisp-program-code-create-bar/" /><meta property="og:site_name" content="测量老覃’s blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2010-05-10T08:56:10+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="绘横断面图标尺AutoLISP程序源代码" /><meta name="twitter:site" content="@qd_xyz" /><meta name="twitter:creator" content="@qd_xyz" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"QinDong","url":"https://www.cehui.ren/about/"},"dateModified":"2010-05-10T08:56:10+08:00","datePublished":"2010-05-10T08:56:10+08:00","description":"A minimal, responsive, and powerful Jekyll theme for presenting professional writing.","headline":"绘横断面图标尺AutoLISP程序源代码","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.cehui.ren/posts/lisp-program-code-create-bar/"},"url":"https://www.cehui.ren/posts/lisp-program-code-create-bar/"}</script><title>绘横断面图标尺AutoLISP程序源代码 | 测量老覃's blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="测量老覃's blog"><meta name="application-name" content="测量老覃's blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/img/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">测量老覃's blog</a></div><div class="site-subtitle font-italic">www.cehui.ren</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/qin-dong" aria-label="stack-overflow" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/qd_xyz" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['qd.xyz','139.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" target="_blank" rel="noopener"> <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>绘横断面图标尺AutoLISP程序源代码</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4 pb-5"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>绘横断面图标尺AutoLISP程序源代码</h1><div class="post-meta text-muted"> <span> 发表于 <em class="" data-ts="1273452970" data-df="YYYY-MM-DD" data-toggle="tooltip" data-placement="bottom"> 2010-05-10 </em> </span><div class="d-flex justify-content-between"> <span> 作者 <em> <a href="https://www.cehui.ren/about/">QinDong</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1186 字"> <em>6 分钟</em>阅读</span></div></div></div><div class="post-content"><p>本段代码是 <a href="https://www.cehui.ren/posts/acad-toolkit/">AutoCAD工程测量工具集</a> 中的一个功能的源代码，可以单独运行。功能绘横断面图标尺。</p><div file="绘横断面标尺.lsp" class="language-lisp highlighter-rouge"><div class="code-header"> <span data-label-text="绘横断面标尺.lsp"><i class="far fa-file-code"></i></span> <button aria-label="copy" data-title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
</pre><td class="rouge-code"><pre><span class="c1">;;绘横断面高程标尺----------------------------------------------------------------------------------;;</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">c:zzBC</span>  <span class="p">(</span><span class="nb">/</span> <span class="nv">i</span> <span class="nv">judge</span> <span class="nv">varBarPosition</span> <span class="nv">varOrigin</span> <span class="nv">varBarPosition_tmp</span> <span class="nv">varTextHeight</span>
		<span class="nv">varBarPositionLevel</span> <span class="nv">varLength_tmp</span> <span class="nv">varLength</span> <span class="nv">varBarStartLevel</span> <span class="nv">varBarEndPositionLevel</span>
		<span class="nv">varBarEndLevel</span> <span class="nv">varBarStartX</span> <span class="nv">varBarStartY</span> <span class="nv">varBarsCount</span> <span class="nv">varStartY</span>	<span class="nv">varEndX</span>	<span class="nv">varEndY</span>
		<span class="nv">varPts</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">i</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">judge</span> <span class="mi">0</span><span class="p">)</span>
  <span class="p">(</span><span class="nv">grtext</span> <span class="mi">-1</span> <span class="s">"绘制标尺 覃东"</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n"</span><span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">varOrigin</span> <span class="p">(</span><span class="nv">getpoint</span> <span class="s">"请输入一点："</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n"</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">/=</span> <span class="nv">varLevel</span> <span class="no">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="k">progn</span> <span class="p">(</span><span class="k">setq</span> <span class="nv">varLevel_tmp</span> <span class="nv">varLevel</span><span class="p">)</span>
	   <span class="p">(</span><span class="k">setq</span> <span class="nv">PromptTmp</span>
		  <span class="p">(</span><span class="nv">strcat</span> <span class="s">"该点高程"</span> <span class="s">"&lt;"</span> <span class="p">(</span><span class="nv">rtos</span> <span class="nv">varLevel</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="s">"&gt;:"</span><span class="p">))</span>
	   <span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">PromptTmp</span> <span class="s">"该点高程："</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="c1">;;(while (&lt;= (setq varLevel (getreal PromptTmp)) 0))</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="p">(</span><span class="k">setq</span> <span class="nv">varLevel</span> <span class="p">(</span><span class="nv">getreal</span> <span class="nv">PromptTmp</span><span class="p">))</span> <span class="no">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">varLevel</span> <span class="nv">varLevel_tmp</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n"</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">/=</span> <span class="nv">varBarPosition_tmp</span> <span class="no">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">PromptTmp</span> <span class="p">(</span><span class="nv">strcat</span> <span class="s">"标尺距离"</span>
			    <span class="s">"&lt;"</span>
			    <span class="p">(</span><span class="nv">rtos</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">varBarPosition_tmp</span><span class="p">)</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
			    <span class="s">","</span>
			    <span class="p">(</span><span class="nv">rtos</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">varBarPosition_tmp</span><span class="p">)</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
			    <span class="s">"&gt;:"</span>
			    <span class="p">)</span>
	  <span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">PromptTmp</span> <span class="s">"标尺距离："</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n"</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarPosition</span> <span class="p">(</span><span class="nv">getpoint</span> <span class="nv">PromptTmp</span><span class="p">))</span> <span class="no">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarPosition</span> <span class="nv">varBarPosition_tmp</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarPosition_tmp</span> <span class="nv">varBarPosition</span><span class="p">)</span>
  <span class="c1">;;选择标尺的顶点</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">/=</span> <span class="nv">varLength_tmp</span> <span class="no">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">PromptTmp</span> <span class="p">(</span><span class="nv">strcat</span> <span class="s">"标尺长度"</span>
			    <span class="s">"&lt;"</span>
			    <span class="p">(</span><span class="nv">rtos</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">varLength_tmp</span><span class="p">)</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
			    <span class="s">","</span>
			    <span class="p">(</span><span class="nv">rtos</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">varLength_tmp</span><span class="p">)</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
			    <span class="s">"&gt;:"</span>
			    <span class="p">)</span>
	  <span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">PromptTmp</span> <span class="s">"标尺长度："</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n"</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="p">(</span><span class="k">setq</span> <span class="nv">varLength</span> <span class="p">(</span><span class="nv">getpoint</span> <span class="nv">PromptTmp</span><span class="p">))</span> <span class="no">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">varLength</span> <span class="nv">varLength_tmp</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="k">setq</span> <span class="nv">varLength_tmp</span> <span class="nv">varLength</span><span class="p">)</span>

  <span class="p">(</span><span class="nb">princ</span> <span class="s">"\n"</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">/=</span> <span class="nv">varScale_tmp</span> <span class="no">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span>
      <span class="nv">PromptTmp</span>	<span class="p">(</span><span class="nv">strcat</span>	<span class="s">"比例尺分母"</span>
			<span class="s">"&lt;"</span>
			<span class="p">(</span><span class="nv">rtos</span> <span class="nv">varScale_tmp</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
			<span class="s">"&gt;:"</span><span class="p">)</span>
      <span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">PromptTmp</span> <span class="s">"比例尺分母："</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="p">(</span><span class="k">setq</span> <span class="nv">varScale</span> <span class="p">(</span><span class="nv">getint</span> <span class="nv">PromptTmp</span><span class="p">))</span> <span class="no">nil</span><span class="p">)</span>
    <span class="p">(</span><span class="k">setq</span> <span class="nv">varScale</span> <span class="nv">varScale_tmp</span><span class="p">)</span>
    <span class="p">)</span>

  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nb">/=</span> <span class="no">nil</span> <span class="nv">varScale</span><span class="p">)</span>
	   <span class="p">(</span><span class="nb">/=</span> <span class="no">nil</span> <span class="nv">varScale</span><span class="p">)</span>
	   <span class="p">(</span><span class="nb">/=</span> <span class="no">nil</span> <span class="nv">varBarPosition</span><span class="p">)</span>
	   <span class="p">(</span><span class="nb">/=</span> <span class="no">nil</span> <span class="nv">varLength</span><span class="p">)</span>
	   <span class="p">(</span><span class="nb">/=</span> <span class="no">nil</span> <span class="nv">varOrigin</span><span class="p">)</span>
	   <span class="p">)</span>
    <span class="c1">;;if main</span>
    <span class="p">(</span><span class="k">progn</span>
      <span class="c1">;;progn main</span>

      <span class="c1">;;当确定标尺长度时若点在下方进行改正</span>
      <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">&lt;=</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">varLength</span><span class="p">)</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">varBarPosition</span><span class="p">))</span>
	<span class="p">(</span><span class="k">setq</span> <span class="nv">varLength</span>
	       <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">varLength</span><span class="p">)</span>
		     <span class="p">(</span><span class="nb">+</span>	<span class="p">(</span><span class="nb">cadr</span> <span class="nv">varBarPosition</span><span class="p">)</span>
			<span class="p">(</span><span class="nb">abs</span> <span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">varLength</span><span class="p">)</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">varBarPosition</span><span class="p">)))</span>
			<span class="p">)</span>
		     <span class="p">)</span>
	      <span class="p">)</span>

	<span class="p">)</span>

      <span class="p">(</span><span class="k">setq</span> <span class="nv">varScale_tmp</span> <span class="nv">varScale</span><span class="p">)</span>
      <span class="p">(</span><span class="k">setq</span> <span class="nv">varScale</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">varScale</span> <span class="mi">100</span><span class="p">))</span>
      <span class="c1">;;比例下每cm长度</span>
      <span class="p">(</span><span class="k">setq</span> <span class="nv">varTextHeight</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">varScale</span> <span class="mf">10.0</span><span class="p">)</span> <span class="mf">1.5</span><span class="p">))</span>
      <span class="c1">;;文字高度及宽度为1.5mm</span>
      <span class="p">(</span><span class="nv">EntMakeTextStyle</span>
	<span class="s">"LevelBar"</span> <span class="nv">varTextHeight</span> <span class="mi">1</span> <span class="s">"simhei.ttf"</span>	<span class="s">""</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">EntMakeLayer</span> <span class="s">"2-断面-标尺"</span> <span class="mi">1</span><span class="p">)</span>
      <span class="c1">;;确定标尺起点高程</span>
      <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarPositionLevel</span>
	     <span class="p">(</span><span class="nb">+</span>	<span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">varBarPosition</span><span class="p">)</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">varOrigin</span><span class="p">))</span>
		<span class="nv">varLevel</span>
		<span class="p">)</span>
	    <span class="p">)</span>
      <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarStartLevel</span> <span class="p">(</span><span class="nv">fix</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarPositionLevel</span> <span class="mf">0.5</span><span class="p">)))</span>
      <span class="c1">;;四舍五入求标尺起点整高程</span>
      <span class="c1">;;确定标尺终点高程</span>
      <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarEndPositionLevel</span>
	     <span class="p">(</span><span class="nb">+</span>	<span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">varLength</span><span class="p">)</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">varOrigin</span><span class="p">))</span>
		<span class="nv">varLevel</span>
		<span class="p">)</span>
	    <span class="p">)</span>
      <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarEndLevel</span> <span class="p">(</span><span class="nv">fix</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarEndPositionLevel</span> <span class="mf">0.5</span><span class="p">)))</span>
      <span class="c1">;;四舍五入求标尺起点整高程</span>
      <span class="c1">;;确定标尺起点坐标</span>
      <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarStartX</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">varBarPosition</span><span class="p">))</span>
      <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarStartY</span>
	     <span class="p">(</span><span class="nb">+</span>	<span class="p">(</span><span class="nb">cadr</span> <span class="nv">varBarPosition</span><span class="p">)</span>
		<span class="p">(</span><span class="nb">-</span> <span class="nv">varBarStartLevel</span> <span class="nv">varBarPositionLevel</span><span class="p">)</span>
		<span class="p">)</span>
	    <span class="p">)</span>
      <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarsCount</span>
	     <span class="p">(</span><span class="nb">+</span>	<span class="p">(</span><span class="nv">atoi</span>
		  <span class="p">(</span><span class="nv">rtos</span>
		    <span class="p">(</span><span class="nb">/</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">varBarEndLevel</span> <span class="nv">varBarStartLevel</span><span class="p">)</span> <span class="nv">varScale</span><span class="p">)</span>
		    <span class="mi">2</span>
		    <span class="mi">0</span>
		    <span class="p">)</span>
		  <span class="p">)</span>
		<span class="mi">1</span>
		<span class="p">)</span>
	    <span class="p">)</span>

      <span class="p">(</span><span class="k">setq</span> <span class="nv">varBarsCount</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nv">fix</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">varBarsCount</span> <span class="mi">2</span><span class="p">)</span> <span class="mf">0.5</span><span class="p">))</span> <span class="mi">2</span><span class="p">))</span>

      <span class="p">(</span><span class="nv">while</span> <span class="p">(</span><span class="nb">/=</span> <span class="nv">varBarsCount</span> <span class="mi">0</span><span class="p">)</span>
	<span class="p">(</span><span class="k">setq</span> <span class="nv">varStartY</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarStartY</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">i</span> <span class="nv">varScale</span><span class="p">)))</span>

	<span class="p">(</span><span class="k">setq</span> <span class="nv">varEndX</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">varBarStartX</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">varScale</span> <span class="mf">10.0</span><span class="p">)</span> <span class="mf">1.5</span><span class="p">)))</span>
	<span class="p">(</span><span class="k">setq</span> <span class="nv">varEndY</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarStartY</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">i</span> <span class="mi">1</span><span class="p">)</span> <span class="nv">varScale</span><span class="p">)))</span>


	<span class="p">(</span><span class="k">setq</span> <span class="nv">Fp</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">varBarStartX</span> <span class="nv">varStartY</span><span class="p">))</span>
	<span class="p">(</span><span class="k">setq</span> <span class="nv">Ep</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">varEndX</span> <span class="nv">varEndY</span><span class="p">))</span>

	<span class="p">(</span><span class="k">setq</span> <span class="nv">Lfp</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">varBarStartX</span> <span class="nv">varStartY</span><span class="p">))</span>
	<span class="p">(</span><span class="k">setq</span> <span class="nv">Lep</span>
	       <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarStartX</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">varScale</span> <span class="mf">10.0</span><span class="p">))</span> <span class="nv">varStartY</span><span class="p">))</span>

	<span class="p">(</span><span class="k">setq</span>
	  <span class="nv">Txtp</span>
	   <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarStartX</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">varScale</span> <span class="mf">10.0</span><span class="p">)</span> <span class="mf">2.0</span><span class="p">))</span> <span class="nv">varEndY</span><span class="p">)</span>
	  <span class="p">)</span>
	<span class="p">(</span><span class="k">setq</span> <span class="nv">Hi</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarStartLevel</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">varScale</span> <span class="nv">i</span><span class="p">)))</span>
	<span class="p">(</span><span class="k">setq</span>
	  <span class="nv">Loe</span> <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">varScale</span> <span class="mf">10.0</span><span class="p">)</span> <span class="nv">varBarStartX</span><span class="p">)</span>
		    <span class="nv">varBarStartY</span><span class="p">)</span>
	  <span class="p">)</span>
	<span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">judge</span> <span class="mi">0</span><span class="p">)</span>
	  <span class="p">(</span><span class="k">progn</span>
	    <span class="p">(</span><span class="k">setq</span> <span class="nv">SolidBarFp</span>
		   <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">/</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">Fp</span><span class="p">)</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">Ep</span><span class="p">))</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">Fp</span><span class="p">))</span>
		  <span class="p">)</span>
	    <span class="c1">;;实心标尺起点</span>
	    <span class="p">(</span><span class="k">setq</span> <span class="nv">SolidBarEp</span>
		   <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">/</span> <span class="p">(</span><span class="nb">+</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">Fp</span><span class="p">)</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">Ep</span><span class="p">))</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">Ep</span><span class="p">))</span>
		  <span class="p">)</span>
	    <span class="c1">;;实心标尺终点</span>
	    <span class="p">(</span><span class="nv">entMakePLineThick</span>
	      <span class="p">(</span><span class="nb">list</span> <span class="nv">SolidBarFp</span> <span class="nv">SolidBarEp</span><span class="p">)</span>
	      <span class="nv">varTextHeight</span>
	      <span class="s">"2-断面-标尺"</span>
	      <span class="p">)</span>
	    <span class="p">(</span><span class="nv">EntMakeLine</span>
	      <span class="p">(</span><span class="nb">car</span> <span class="nv">lfp</span><span class="p">)</span>
	      <span class="p">(</span><span class="nb">cadr</span> <span class="nv">Lfp</span><span class="p">)</span>
	      <span class="p">(</span><span class="nb">car</span> <span class="nv">Lep</span><span class="p">)</span>
	      <span class="p">(</span><span class="nb">cadr</span> <span class="nv">Lep</span><span class="p">)</span>
	      <span class="s">"2-断面-标尺"</span>
	      <span class="p">)</span>
	    <span class="p">(</span><span class="nv">EntMakeText</span>
	      <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarStartX</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">varScale</span> <span class="mf">10.0</span><span class="p">)</span> <span class="mf">1.1</span><span class="p">))</span>
	      <span class="nv">varStartY</span>
	      <span class="p">(</span><span class="nv">itoa</span> <span class="nv">Hi</span><span class="p">)</span>
	      <span class="nv">varTextHeight</span>
	      <span class="s">"LevelBar"</span>
	      <span class="s">"2-断面-标尺"</span>
	      <span class="p">)</span>
	    <span class="p">(</span><span class="k">setq</span> <span class="nv">judge</span> <span class="mi">1</span><span class="p">)</span>
	    <span class="p">)</span>
	  <span class="p">(</span><span class="k">progn</span>
	    <span class="p">(</span><span class="k">setq</span> <span class="nv">varPts</span> <span class="no">nil</span><span class="p">)</span>
	    <span class="p">(</span><span class="k">setq</span> <span class="nv">varPts</span>
		   <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">varBarStartX</span> <span class="nv">varStartY</span><span class="p">)</span> <span class="nv">varPts</span><span class="p">))</span>
	    <span class="p">(</span><span class="k">setq</span>
	      <span class="nv">varPts</span> <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">varBarStartX</span> <span class="nv">varEndY</span><span class="p">)</span> <span class="nv">varPts</span><span class="p">))</span>
	    <span class="p">(</span><span class="k">setq</span> <span class="nv">varPts</span> <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">varEndX</span> <span class="nv">varEndY</span><span class="p">)</span> <span class="nv">varPts</span><span class="p">))</span>
	    <span class="p">(</span><span class="k">setq</span> <span class="nv">varPts</span> <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">varEndX</span> <span class="nv">varStartY</span><span class="p">)</span> <span class="nv">varPts</span><span class="p">))</span>
	    <span class="p">(</span><span class="nv">entMakePLine</span> <span class="nv">varPts</span> <span class="s">"2-断面-标尺"</span><span class="p">)</span>
	    <span class="p">(</span><span class="k">setq</span> <span class="nv">judge</span> <span class="mi">0</span><span class="p">)</span>
	    <span class="p">)</span>
	  <span class="p">)</span>
	<span class="p">(</span><span class="k">setq</span> <span class="nv">i</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">i</span> <span class="mi">1</span><span class="p">))</span>
	<span class="p">(</span><span class="k">setq</span> <span class="nv">varBarsCount</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">varBarsCount</span> <span class="mi">1</span><span class="p">))</span>
	<span class="p">)</span>
      <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">judge</span> <span class="mi">0</span><span class="p">)</span>
	<span class="p">(</span><span class="k">progn</span>
	  <span class="p">(</span><span class="k">setq</span> <span class="nv">Lfp</span> <span class="p">(</span><span class="nb">list</span> <span class="nv">varBarStartX</span> <span class="nv">varEndY</span><span class="p">))</span>
	  <span class="p">(</span><span class="k">setq</span>	<span class="nv">Lep</span>
		 <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarStartX</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">varScale</span> <span class="mf">10.0</span><span class="p">))</span> <span class="nv">varEndY</span><span class="p">))</span>
	  <span class="p">(</span><span class="k">setq</span> <span class="nv">Hi</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarStartLevel</span> <span class="p">(</span><span class="nb">*</span> <span class="nv">varScale</span> <span class="nv">i</span><span class="p">)))</span>
	  <span class="p">(</span><span class="nv">EntMakeLine</span>
	    <span class="p">(</span><span class="nb">car</span> <span class="nv">lfp</span><span class="p">)</span>
	    <span class="p">(</span><span class="nb">cadr</span> <span class="nv">Lfp</span><span class="p">)</span>
	    <span class="p">(</span><span class="nb">car</span> <span class="nv">Lep</span><span class="p">)</span>
	    <span class="p">(</span><span class="nb">cadr</span> <span class="nv">Lep</span><span class="p">)</span>
	    <span class="s">"2-断面-标尺"</span>
	    <span class="p">)</span>
	  <span class="p">(</span><span class="nv">EntMakeText</span>
	    <span class="p">(</span><span class="nb">+</span> <span class="nv">varBarStartX</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nb">/</span> <span class="nv">varScale</span> <span class="mf">10.0</span><span class="p">)</span> <span class="mf">1.1</span><span class="p">))</span>
	    <span class="nv">varEndY</span>
	    <span class="p">(</span><span class="nv">itoa</span> <span class="nv">Hi</span><span class="p">)</span>
	    <span class="nv">varTextHeight</span>
	    <span class="s">"LevelBar"</span>
	    <span class="s">"2-断面-标尺"</span>
	    <span class="p">)</span>
	  <span class="p">)</span>
	<span class="p">)</span>
      <span class="p">(</span><span class="nb">princ</span>
	<span class="s">"\n(C)水电十二局宁海施工局测量队 覃东 qd.xyz@139.com"</span>
	<span class="p">)</span>
      <span class="p">(</span><span class="nv">vl-cmdf</span> <span class="s">"regen"</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">princ</span><span class="p">)</span>
      <span class="p">)</span>
    <span class="c1">;;end progn main</span>
    <span class="p">(</span><span class="k">progn</span>
      <span class="p">(</span><span class="nb">princ</span>
	<span class="s">"\n输入错误！请按提示输入！ (C)水电十二局宁海施工局测量队 覃东 qd.xyz@139.com"</span>
	<span class="p">)</span>
      <span class="p">(</span><span class="nb">princ</span><span class="p">)</span>
      <span class="p">)</span>
    <span class="p">)</span>
  <span class="c1">;;end if main</span>

  <span class="p">)</span>

<span class="c1">;;绘横断面高程标尺----------------------------------------------------------------------------------;;</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%E7%BC%96%E7%A8%8B%E5%BC%80%E5%8F%91/'>编程开发</a>, <a href='/categories/autolisp/'>AutoLISP</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/%E6%A8%AA%E6%96%AD%E9%9D%A2/" class="post-tag no-text-decoration" >横断面</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%E7%BB%98%E6%A8%AA%E6%96%AD%E9%9D%A2%E5%9B%BE%E6%A0%87%E5%B0%BAAutoLISP%E7%A8%8B%E5%BA%8F%E6%BA%90%E4%BB%A3%E7%A0%81+-+%E6%B5%8B%E9%87%8F%E8%80%81%E8%A6%83%27s+blog&url=https%3A%2F%2Fwww.cehui.ren%2Fposts%2Flisp-program-code-create-bar%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%E7%BB%98%E6%A8%AA%E6%96%AD%E9%9D%A2%E5%9B%BE%E6%A0%87%E5%B0%BAAutoLISP%E7%A8%8B%E5%BA%8F%E6%BA%90%E4%BB%A3%E7%A0%81+-+%E6%B5%8B%E9%87%8F%E8%80%81%E8%A6%83%27s+blog&u=https%3A%2F%2Fwww.cehui.ren%2Fposts%2Flisp-program-code-create-bar%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fwww.cehui.ren%2Fposts%2Flisp-program-code-create-bar%2F&text=%E7%BB%98%E6%A8%AA%E6%96%AD%E9%9D%A2%E5%9B%BE%E6%A0%87%E5%B0%BAAutoLISP%E7%A8%8B%E5%BA%8F%E6%BA%90%E4%BB%A3%E7%A0%81+-+%E6%B5%8B%E9%87%8F%E8%80%81%E8%A6%83%27s+blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="http://service.weibo.com/share/share.php?title=%E7%BB%98%E6%A8%AA%E6%96%AD%E9%9D%A2%E5%9B%BE%E6%A0%87%E5%B0%BAAutoLISP%E7%A8%8B%E5%BA%8F%E6%BA%90%E4%BB%A3%E7%A0%81+-+%E6%B5%8B%E9%87%8F%E8%80%81%E8%A6%83%27s+blog&url=https%3A%2F%2Fwww.cehui.ren%2Fposts%2Flisp-program-code-create-bar%2F" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" data-title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/autolisp-draw-3d-entity-code/">AutoLISP绘三维对象实体代码</a><li><a href="/posts/autolisp-layout-cass-points-draw-small-sphere/">AutoLISP源代码展CASS地形点生成三维小球体检查超欠挖</a><li><a href="/posts/mstn-accudraw-commands-hotkeys-list/">MicroStation精确绘图快捷键入命令的完整列表</a><li><a href="/posts/ord-plan-by-3D-element-smartline-create-alignment/">OpenRoads普通三维线段转化为Civil几何路线</a><li><a href="/posts/autocad-linework-commands/">AutoCAD编辑处理线构件LINEWORK相关命令</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/microstation/">MicroStation</a> <a class="post-tag" href="/tags/vba/">VBA</a> <a class="post-tag" href="/tags/%E4%BB%A3%E7%A0%81/">代码</a> <a class="post-tag" href="/tags/xm/">XM</a> <a class="post-tag" href="/tags/openroads/">OpenRoads</a> <a class="post-tag" href="/tags/key-in/">key-in</a> <a class="post-tag" href="/tags/%E6%96%B9%E9%87%8F/">方量</a> <a class="post-tag" href="/tags/civil3d/">Civil3D</a> <a class="post-tag" href="/tags/%E6%95%99%E7%A8%8B/">教程</a> <a class="post-tag" href="/tags/%E6%96%AD%E9%9D%A2/">断面</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/lisp-program-code-section-area-label/"><div class="card-body"> <em class="small" data-ts="1273211350" data-df="YYYY-MM-DD" > 2010-05-07 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>横断面区域面积标注AutoLISP程序</h3><div class="text-muted small"><p> 本段代码是 AutoCAD工程测量工具集 中的一个功能的源代码，可以单独运行。 代码中各命令功能如下： zzA与zzArea：标注面积到区域中心 zzArea2Table：输出面积到AutoCAD表格 zzArea2File：输出面积到文件 ;;------------------------------------------------------------;;...</p></div></div></a></div><div class="card"> <a href="/posts/ord-template-point-line-component-definition-rules/"><div class="card-body"> <em class="small" data-ts="1664260140" data-df="YYYY-MM-DD" > 2022-09-27 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>OpenRoads横断面模板编辑规则（参考）</h3><div class="text-muted small"><p> 横断面模板Points编辑规则 横断面模板Components编辑规则 为了更好适应后期出图功能，横断面模板在编辑过程中某些主要特征点、构件、边坡名称应满足相应规则。 横断面模板Points编辑规则 以下点均要求在横断面模板定制时要求采用的点名称，下表仅介绍了三级边坡所有横断面左侧点的命名规则，横断面右侧及多级边坡以此类推。 序号 ...</p></div></div></a></div><div class="card"> <a href="/posts/c3d-road-modeling-essential/"><div class="card-body"> <em class="small" data-ts="1663430400" data-df="YYYY-MM-DD" > 2022-09-18 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>AutoCAD Civil 3D道路三要素</h3><div class="text-muted small"><p> 今天给大家讲一下在civil3d中如何创建道路模型，以及在创建道路模型时需要注意的一些事项。 在civil3d中创建道路模型叫做Create Corridor，这里的Corridor泛指一切带状的对象，除了道路，也可以是渠道、隧道、防洪堤，也可以是大坝，尽量发挥你的想象吧。 那么创建一个道路模型需要准备三个对象（道路创建的三要素）：一个是平面路线（Alignment）用于控制平面的走向...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/lisp-program-code-del-inner-points/" class="btn btn-outline-primary" prompt="上一篇"><p>删除封闭区域内地形点AutoLISP程序源代码</p></a> <a href="/posts/lisp-program-code-cass-points-to-cad-entity/" class="btn btn-outline-primary" prompt="下一篇"><p>CASS地形图地形点单元转换为AutoCAD实体点对象</p></a></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/qd_xyz">QinDong</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/microstation/">MicroStation</a> <a class="post-tag" href="/tags/vba/">VBA</a> <a class="post-tag" href="/tags/%E4%BB%A3%E7%A0%81/">代码</a> <a class="post-tag" href="/tags/xm/">XM</a> <a class="post-tag" href="/tags/openroads/">OpenRoads</a> <a class="post-tag" href="/tags/key-in/">key-in</a> <a class="post-tag" href="/tags/%E6%96%B9%E9%87%8F/">方量</a> <a class="post-tag" href="/tags/civil3d/">Civil3D</a> <a class="post-tag" href="/tags/%E6%95%99%E7%A8%8B/">教程</a> <a class="post-tag" href="/tags/%E6%96%AD%E9%9D%A2/">断面</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">发现新版本的内容。</p><button type="button" class="btn btn-primary" aria-label="Update"> 更新 </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/zh.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
